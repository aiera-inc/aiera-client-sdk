<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width,initial-scale=1" />
        <style>
            iframe {
                border: none;
                resize: none;
                width: 550px;
                overflow: hidden;
            }
        </style>
    </head>
    <body>
        <script src="../embed.js"></script>
        <iframe id="aiera"></iframe>
        <script>
            const eventSnippet = new Aiera.Module('../modules/Transcrippet/index.html', 'aiera');
            eventSnippet.load().then(() => {
                eventSnippet.authenticateApiKey('5425a8a29e64be45ed728d9bf3df9d3a');
            });

            eventSnippet.on('authenticated', () => {
                eventSnippet.configure({
                    hideSettings: true,
                    options: {
                        transcrippetGuid: '5d5886326b5ba0a4b6dd4f89ea84b574',
                        // darkMode: true,
                    },
                    // overrides: {
                    //     style: `
                    //         .text-blue-600 {
                    //             color: #008094 !important;
                    //         }
                    //         `,
                    // },
                    tracking: {
                        userId: 'nash-widget-user',
                    },
                });
            });

            eventSnippet.on('event-audio', (event) => {
                console.log(`${event.action} audio:`, event);
            });

            // Create browser compatible event handler.
            var eventMethod = window.addEventListener ? 'addEventListener' : 'attachEvent';
            var eventer = window[eventMethod];
            var messageEvent = eventMethod == 'attachEvent' ? 'onmessage' : 'message';
            // Listen for a message from the iframe.
            eventer(
                messageEvent,
                function (e) {
                    if (isNaN(e.data)) return;
                    document.getElementById('aiera').style.height = e.data + 'px';
                },
                false
            );
        </script>
    </body>
</html>
